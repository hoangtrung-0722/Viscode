[{"C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\index.js":"1","C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\reportWebVitals.js":"2","C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\App.js":"3","C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\container\\WorkSpace.js":"4","C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\components\\Terminal.js":"5","C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\components\\BlocklyComponent.js":"6","C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\components\\ExportArea.js":"7","C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\components\\worker.js":"8","C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\components\\OpenModal.js":"9","C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\components\\SaveModal.js":"10","C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\config\\constant.js":"11","C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\blocks\\variables.js":"12"},{"size":523,"mtime":1615030799524,"results":"13","hashOfConfig":"14"},{"size":362,"mtime":499162500000,"results":"15","hashOfConfig":"14"},{"size":2609,"mtime":1616295247813,"results":"16","hashOfConfig":"14"},{"size":4968,"mtime":1615110538032,"results":"17","hashOfConfig":"14"},{"size":4088,"mtime":1615111670091,"results":"18","hashOfConfig":"14"},{"size":2416,"mtime":1615030845471,"results":"19","hashOfConfig":"14"},{"size":2074,"mtime":1616296115190,"results":"20","hashOfConfig":"14"},{"size":1200,"mtime":1615134176231,"results":"21","hashOfConfig":"14"},{"size":4797,"mtime":1615030799519,"results":"22","hashOfConfig":"14"},{"size":5350,"mtime":1615030799520,"results":"23","hashOfConfig":"14"},{"size":54,"mtime":1615030799521,"results":"24","hashOfConfig":"14"},{"size":624,"mtime":1615110000951,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"ktw550",{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"35","usedDeprecatedRules":"28"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"38","usedDeprecatedRules":"28"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"28"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\index.js",[],["54","55"],"C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\reportWebVitals.js",[],"C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\App.js",[],"C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\container\\WorkSpace.js",["56"],"import React from \"react\";\r\nimport Terminal from \"../components/Terminal\";\r\nimport { Layout, message, Tabs } from \"antd\";\r\nimport BlocklyComponent, { Block, Category } from \"../components/BlocklyComponent\";\r\nimport \"blockly/javascript\";\r\nimport \"../blocks/variables\";\r\nimport \"./workspace.css\";\r\nimport ExportArea from \"../components/ExportArea\";\r\nimport axios from \"axios\";\r\nimport { API_HOST } from \"../config/constant\";\r\nimport { useParams } from \"react-router-dom\";\r\nconst { Content, Footer } = Layout;\r\n\r\nconst DEFAULT_TITLE = \"Untitled Workspace\";\r\n\r\nconst DEFAULT_WORKSPACE = {\r\n  title: DEFAULT_TITLE,\r\n  key: \"1\",\r\n  xml: \"<xml xmlns='http://www.w3.org/1999/xhtml'></xml>\",\r\n};\r\n\r\nfunction WorkSpace({ updateXml }) {\r\n  const [xml, setXml] = React.useState(DEFAULT_WORKSPACE.xml);\r\n  const [code, setCode] = React.useState(\"\");\r\n  const { id } = useParams();\r\n  const onWorkSpaceChange = (code) => {\r\n    setCode(code);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (id)\r\n      axios\r\n        .get(`${API_HOST}/my-files/files/${id}`)\r\n        .then(({ data }) => setXml(data.data))\r\n        .catch((err) => message.error(err));\r\n  }, [id]);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        height: \"100%\",\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n      }}\r\n    >\r\n      <div\r\n        style={{\r\n          height: \"100%\",\r\n          width: \"75%\",\r\n          resize: \"horizontal\",\r\n          overflow: \"auto\",\r\n          borderRight: \"1px solid #c6c6c6\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n        }}\r\n      >\r\n        <BlocklyComponent\r\n          readOnly={false}\r\n          move={{\r\n            scrollbars: true,\r\n            drag: true,\r\n            wheel: true,\r\n          }}\r\n          initialXml={xml}\r\n          onWorkSpaceChange={onWorkSpaceChange}\r\n          updateXml={updateXml}\r\n        >\r\n          <Category name=\"Variables\" categorystyle=\"variable_category\">\r\n            <Block type=\"variables_get\"></Block>\r\n            <Block type=\"variables_set\"></Block>\r\n            <Block type=\"variables_null\"></Block>\r\n          </Category>\r\n          <Category name=\"Procedures\" categorystyle=\"procedure_category\">\r\n            <Block type=\"procedures_defnoreturn\"></Block>\r\n            <Block type=\"procedures_defreturn\"></Block>\r\n            <Block type=\"procedures_callnoreturn\"></Block>\r\n            <Block type=\"procedures_callreturn\"></Block>\r\n          </Category>\r\n          <Category name=\"Text\" categorystyle=\"text_category\">\r\n            <Block type=\"text_print\"></Block>\r\n            <Block type=\"text_prompt\"></Block>\r\n            <Block type=\"text\"></Block>\r\n            <Block type=\"text_length\"></Block>\r\n            <Block type=\"text_multiline\"></Block>\r\n            <Block type=\"text_join\"></Block>\r\n            <Block type=\"text_append\"></Block>\r\n          </Category>\r\n          <Category name=\"Loop\" categorystyle=\"loop_category\">\r\n            <Block type=\"controls_whileUntil\" blockstyle=\"list_blocks\"></Block>\r\n            <Block type=\"controls_repeat\"></Block>\r\n            <Block type=\"controls_for\"></Block>\r\n          </Category>\r\n          <Category name=\"Logic\" categorystyle=\"logic_category\">\r\n            <Block type=\"controls_if\"></Block>\r\n            <Block type=\"logic_compare\"></Block>\r\n            <Block type=\"logic_operation\"></Block>\r\n            <Block type=\"logic_boolean\"></Block>\r\n          </Category>\r\n          <Category name=\"Math\" categorystyle=\"math_category\">\r\n            <Block type=\"math_number\"></Block>\r\n            <Block type=\"math_arithmetic\"></Block>\r\n            <Block type=\"math_modulo\"></Block>\r\n            <Block type=\"math_single\"></Block>\r\n            <Block type=\"math_trig\"></Block>\r\n            <Block type=\"math_constant\"></Block>\r\n            <Block type=\"math_number_property\"></Block>\r\n          </Category>\r\n          <Category name=\"List\" categorystyle=\"list_category\">\r\n            <Block type=\"lists_getIndex\"></Block>\r\n            <Block type=\"lists_create_empty\"></Block>\r\n            <Block type=\"lists_create_with\"></Block>\r\n            <Block type=\"lists_repeat\"></Block>\r\n            <Block type=\"lists_length\"></Block>\r\n            <Block type=\"lists_isEmpty\"></Block>\r\n          </Category>\r\n        </BlocklyComponent>\r\n      </div>\r\n      <Layout style={{ height: \"100%\", width: \"25%\" }}>\r\n        <Content style={{ height: \"35%\" }}>\r\n          <Terminal code={code} />\r\n        </Content>\r\n        <Content style={{ backgroundColor: \"white\", height: \"60%\", border: \"none\" }}>\r\n          <ExportArea code={code} />\r\n        </Content>\r\n        <Footer\r\n          style={{\r\n            height: \"5%\",\r\n            padding: \"5px 10px\",\r\n            borderTop: \"1px solid #cacaca\",\r\n            textAlign: \"center\",\r\n          }}\r\n        >\r\n          Võ Minh Triều - Nguyễn Hoàng Trung - 2020\r\n        </Footer>\r\n      </Layout>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default WorkSpace;\r\nexport { DEFAULT_TITLE, DEFAULT_WORKSPACE };\r\n","C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\components\\Terminal.js",["57"],"import React from \"react\";\r\nimport { Button } from \"antd\";\r\nimport { CaretRightOutlined, StopOutlined } from \"@ant-design/icons\";\r\nimport ScrollToBottom from \"react-scroll-to-bottom\";\r\nimport getWorkerCode from \"./worker\";\r\nimport \"./terminal.css\";\r\n\r\nconst getWebWorker = (code) => {\r\n  const blob = new Blob([getWorkerCode(code)]);\r\n  return new Worker(URL.createObjectURL(blob));\r\n};\r\n\r\nfunction Terminal({ code }) {\r\n  const container = React.useRef(null);\r\n  const output = React.useRef(null);\r\n  const [worker, setWorker] = React.useState(null);\r\n  const [running, setRunning] = React.useState(false);\r\n  const caret = React.useRef(null);\r\n\r\n  React.useState(() => {\r\n    if (caret.current) {\r\n      caret.current.value = \"\";\r\n    }\r\n  }, [running]);\r\n\r\n  const runCode = () => {\r\n    if (worker) worker.terminate();\r\n    output.current.innerHTML = \"\";\r\n    caret.current.value = \"\";\r\n    setRunning(true);\r\n    const temp = getWebWorker(code);\r\n    temp.addEventListener(\"message\", (e) => {\r\n      if (e.data.status !== \"done\") {\r\n        if (e.data.status === \"error\") {\r\n          output.current.innerHTML += `<span style=\"color: #ff4d4f\">${e.data.err.message.replaceAll(\r\n            \"\\\\n\",\r\n            \"<br/>\"\r\n          )}</span>`;\r\n          return;\r\n        }\r\n        if (e.data.waitForInput) {\r\n          if (e.data.text !== null) output.current.innerHTML += e.data.text.replaceAll(\"\\\\n\", \"<br/>\");\r\n          caret.current.focus();\r\n        } else {\r\n          if (e.data.text !== null) output.current.innerHTML += e.data.text.replaceAll(\"\\\\n\", \"<br/>\");\r\n        }\r\n      } else {\r\n        temp.terminate();\r\n        setWorker(null);\r\n        setRunning(false);\r\n        output.current.innerHTML += '<br/><span style=\"color: lime\">Program exited with no error</span>';\r\n      }\r\n    });\r\n    setWorker(temp);\r\n  };\r\n\r\n  const stopRunning = () => {\r\n    worker.terminate();\r\n    setRunning(false);\r\n    output.current.innerHTML += '<br/><span style=\"color: red\">Program stopped by user!</span>';\r\n  };\r\n\r\n  const sendInput = (e) => {\r\n    if (e.key === \"Enter\" && worker) {\r\n      output.current.innerHTML += e.target.value + \"<br/>\";\r\n      worker.postMessage(e.target.value);\r\n      e.target.value = \"\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      ref={container}\r\n      style={{\r\n        height: \"100%\",\r\n        display: \"flex\",\r\n        flexFlow: \"column\",\r\n        background: \"black\",\r\n      }}\r\n    >\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          backgroundColor: \"white\",\r\n          padding: \"5px\",\r\n          borderBottom: \"1px solid #cecece\",\r\n        }}\r\n      >\r\n        <h3 style={{ marginBottom: 0 }}>Terminal</h3>\r\n        {running ? (\r\n          <Button\r\n            onClick={stopRunning}\r\n            type=\"primary\"\r\n            danger\r\n            icon={<StopOutlined />}\r\n            title=\"Stop running\"\r\n            style={{ marginLeft: \"auto\" }}\r\n          >\r\n            Stop\r\n          </Button>\r\n        ) : (\r\n          <Button\r\n            type=\"primary\"\r\n            icon={<CaretRightOutlined />}\r\n            title=\"Run code in terminal\"\r\n            onClick={runCode}\r\n            style={{ marginLeft: \"auto\" }}\r\n          >\r\n            Run\r\n          </Button>\r\n        )}\r\n      </div>\r\n\r\n      <div\r\n        style={{ backgroundColor: \"black\", padding: 10, height: \"100%\", overflow: \"auto\" }}\r\n        onClick={() => caret.current.focus()}\r\n      >\r\n        <pre style={{ color: \"rgba(255,255,255,0.9)\" }}>\r\n          Viscode Terminal (c) - All Rights Reserved\r\n          <br />\r\n          <span ref={output}></span>\r\n          <input\r\n            ref={caret}\r\n            onKeyDown={sendInput}\r\n            style={{\r\n              display: \"inline\",\r\n              whiteSpace: \"pre-wrap\",\r\n              border: \"none\",\r\n              lineHeight: 1,\r\n              padding: 0,\r\n              background: \"none\",\r\n              outline: \"none\",\r\n            }}\r\n            type=\"text\"\r\n          />\r\n        </pre>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Terminal;\r\n","C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\components\\BlocklyComponent.js",["58"],"import React from \"react\";\r\nimport \"./blocklyComponent.css\";\r\nimport Blockly from \"blockly/core\";\r\nimport \"blockly/blocks\";\r\nimport BlocklyJavaScript from \"blockly/javascript\";\r\nimport locale from \"blockly/msg/en\";\r\nimport { io } from \"socket.io-client\";\r\nimport { message } from \"antd\";\r\nBlockly.setLocale(locale);\r\nconst socket = io(\"http://localhost:5000\");\r\n\r\nfunction BlocklyComponent(props) {\r\n  const [workspace, setWorkspace] = React.useState(null);\r\n  const toolbox = React.useRef(null);\r\n  const editor = React.useRef(null);\r\n  const { initialXml, children, updateXml, onWorkSpaceChange, ...rest } = props;\r\n\r\n  React.useEffect(() => {\r\n    const tempWorkSpace = Blockly.inject(editor.current, {\r\n      toolbox: toolbox.current,\r\n      ...rest,\r\n    });\r\n\r\n    const onChange = (event) => {\r\n      if (event.type !== \"finished_loading\" && !event.isUiEvent) {\r\n        const code = BlocklyJavaScript.workspaceToCode(tempWorkSpace);\r\n        onWorkSpaceChange(code);\r\n        updateXml(Blockly.Xml.workspaceToDom(tempWorkSpace));\r\n        socket.emit(\"eventTriggered\", event.toJson());\r\n      }\r\n    };\r\n\r\n    socket.on(\"eventMirrored\", (jsonEvent) => {\r\n      Blockly.Events.disable();\r\n      Blockly.Events.fromJson(jsonEvent, tempWorkSpace).run(true);\r\n      Blockly.Events.enable();\r\n      const code = BlocklyJavaScript.workspaceToCode(tempWorkSpace);\r\n      onWorkSpaceChange(code);\r\n      updateXml(Blockly.Xml.workspaceToDom(tempWorkSpace));\r\n    });\r\n\r\n    if (initialXml) {\r\n      Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(initialXml), tempWorkSpace);\r\n    }\r\n\r\n    tempWorkSpace.addChangeListener(onChange);\r\n    setWorkspace(tempWorkSpace);\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    if (workspace) {\r\n      Blockly.Xml.clearWorkspaceAndLoadFromXml(Blockly.Xml.textToDom(initialXml), workspace);\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [initialXml]);\r\n\r\n  return (\r\n    <>\r\n      <xml id=\"toolbox\" is=\"blockly\" style={{ display: \"none\" }} ref={toolbox}>\r\n        {children}\r\n      </xml>\r\n      <div ref={editor} id=\"editor\"></div>\r\n    </>\r\n  );\r\n}\r\n\r\nconst Block = ({ children, ...props }) => React.createElement(\"block\", { ...props, is: \"blockly\" }, children);\r\nconst Category = ({ children, ...props }) => React.createElement(\"category\", { ...props, is: \"blockly\" }, children);\r\n\r\nexport { Block, Category };\r\nexport default BlocklyComponent;\r\n","C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\components\\ExportArea.js",[],"C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\components\\worker.js",[],"C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\components\\OpenModal.js",[],"C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\components\\SaveModal.js",[],"C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\config\\constant.js",[],"C:\\Users\\minht\\OneDrive\\Documents\\Viscode\\client\\src\\blocks\\variables.js",[],{"ruleId":"59","replacedBy":"60"},{"ruleId":"61","replacedBy":"62"},{"ruleId":"63","severity":1,"message":"64","line":3,"column":27,"nodeType":"65","messageId":"66","endLine":3,"endColumn":31},{"ruleId":"63","severity":1,"message":"67","line":4,"column":8,"nodeType":"65","messageId":"66","endLine":4,"endColumn":22},{"ruleId":"63","severity":1,"message":"68","line":8,"column":10,"nodeType":"65","messageId":"66","endLine":8,"endColumn":17},"no-native-reassign",["69"],"no-negated-in-lhs",["70"],"no-unused-vars","'Tabs' is defined but never used.","Identifier","unusedVar","'ScrollToBottom' is defined but never used.","'message' is defined but never used.","no-global-assign","no-unsafe-negation"]