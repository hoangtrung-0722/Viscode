[{"D:\\WebLearning\\Viscode\\client\\src\\index.js":"1","D:\\WebLearning\\Viscode\\client\\src\\reportWebVitals.js":"2","D:\\WebLearning\\Viscode\\client\\src\\App.js":"3","D:\\WebLearning\\Viscode\\client\\src\\container\\WorkSpace.js":"4","D:\\WebLearning\\Viscode\\client\\src\\components\\Terminal.js":"5","D:\\WebLearning\\Viscode\\client\\src\\components\\BlocklyComponent.js":"6","D:\\WebLearning\\Viscode\\client\\src\\components\\ExportArea.js":"7","D:\\WebLearning\\Viscode\\client\\src\\components\\worker.js":"8","D:\\WebLearning\\Viscode\\client\\src\\components\\OpenModal.js":"9","D:\\WebLearning\\Viscode\\client\\src\\components\\SaveModal.js":"10","D:\\WebLearning\\Viscode\\client\\src\\config\\constant.js":"11"},{"size":523,"mtime":1613995334594,"results":"12","hashOfConfig":"13"},{"size":375,"mtime":1611665940264,"results":"14","hashOfConfig":"13"},{"size":2679,"mtime":1614569055499,"results":"15","hashOfConfig":"13"},{"size":5037,"mtime":1614593517520,"results":"16","hashOfConfig":"13"},{"size":3798,"mtime":1613448194534,"results":"17","hashOfConfig":"13"},{"size":3072,"mtime":1614659034238,"results":"18","hashOfConfig":"13"},{"size":1708,"mtime":1613448194534,"results":"19","hashOfConfig":"13"},{"size":997,"mtime":1613448194535,"results":"20","hashOfConfig":"13"},{"size":4797,"mtime":1613995334593,"results":"21","hashOfConfig":"13"},{"size":5350,"mtime":1613995334593,"results":"22","hashOfConfig":"13"},{"size":54,"mtime":1613995334594,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"1mfmjts",{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"26"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"26"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"D:\\WebLearning\\Viscode\\client\\src\\index.js",[],["49","50"],"D:\\WebLearning\\Viscode\\client\\src\\reportWebVitals.js",[],"D:\\WebLearning\\Viscode\\client\\src\\App.js",[],"D:\\WebLearning\\Viscode\\client\\src\\container\\WorkSpace.js",["51"],"import React from \"react\";\r\nimport Terminal from \"../components/Terminal\";\r\nimport { Layout, message, Tabs } from \"antd\";\r\nimport BlocklyComponent, {\r\n  Block,\r\n  Category,\r\n} from \"../components/BlocklyComponent\";\r\nimport \"blockly/javascript\";\r\nimport \"./workspace.css\";\r\nimport ExportArea from \"../components/ExportArea\";\r\nimport axios from \"axios\";\r\nimport { API_HOST } from \"../config/constant\";\r\nimport { useParams } from \"react-router-dom\";\r\nconst { Content, Footer } = Layout;\r\n\r\nconst DEFAULT_TITLE = \"Untitled Workspace\";\r\n\r\nconst DEFAULT_WORKSPACE = {\r\n  title: DEFAULT_TITLE,\r\n  key: \"1\",\r\n  xml: \"<xml xmlns='http://www.w3.org/1999/xhtml'></xml>\",\r\n};\r\n\r\nfunction WorkSpace({ updateXml }) {\r\n  const [xml, setXml] = React.useState(DEFAULT_WORKSPACE.xml);\r\n  const [code, setCode] = React.useState(\"\");\r\n  const { id } = useParams();\r\n  const onWorkSpaceChange = (code) => {\r\n    setCode(code);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (id)\r\n      axios\r\n        .get(`${API_HOST}/my-files/files/${id}`)\r\n        .then(({ data }) => setXml(data.data))\r\n        .catch((err) => message.error(err));\r\n  }, [id]);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        height: \"100%\",\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n      }}\r\n    >\r\n      <div\r\n        style={{\r\n          height: \"100%\",\r\n          width: \"75%\",\r\n          resize: \"horizontal\",\r\n          overflow: \"auto\",\r\n          borderRight: \"1px solid #c6c6c6\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n        }}\r\n      >\r\n        <BlocklyComponent\r\n          readOnly={false}\r\n          move={{\r\n            scrollbars: true,\r\n            drag: true,\r\n            wheel: true,\r\n          }}\r\n          initialXml={xml}\r\n          onWorkSpaceChange={onWorkSpaceChange}\r\n          updateXml={updateXml}\r\n        >\r\n          <Category name=\"Variables\" categorystyle=\"variable_category\">\r\n            <Block type=\"variables_get\"></Block>\r\n            <Block type=\"variables_set\"></Block>\r\n          </Category>\r\n          <Category name=\"Procedures\" categorystyle=\"procedure_category\">\r\n            <Block type=\"procedures_defnoreturn\"></Block>\r\n            <Block type=\"procedures_defreturn\"></Block>\r\n            <Block type=\"procedures_mutatorcontainer\"></Block>\r\n            <Block type=\"procedures_mutatorarg\"></Block>\r\n            <Block type=\"procedures_callnoreturn\"></Block>\r\n            <Block type=\"procedures_callreturn\"></Block>\r\n          </Category>\r\n          <Category name=\"Text\" categorystyle=\"text_category\">\r\n            <Block type=\"text_print\"></Block>\r\n            <Block type=\"text_prompt\"></Block>\r\n            <Block type=\"text\"></Block>\r\n            <Block type=\"text_length\"></Block>\r\n            <Block type=\"text_multiline\"></Block>\r\n            <Block type=\"text_join\"></Block>\r\n            <Block type=\"text_append\"></Block>\r\n          </Category>\r\n          <Category name=\"Loop\" categorystyle=\"loop_category\">\r\n            <Block type=\"controls_whileUntil\" blockstyle=\"list_blocks\"></Block>\r\n            <Block type=\"controls_repeat\"></Block>\r\n            <Block type=\"controls_for\"></Block>\r\n          </Category>\r\n          <Category name=\"Logic\" categorystyle=\"logic_category\">\r\n            <Block type=\"controls_if\"></Block>\r\n            <Block type=\"logic_compare\"></Block>\r\n            <Block type=\"logic_operation\"></Block>\r\n            <Block type=\"logic_boolean\"></Block>\r\n          </Category>\r\n          <Category name=\"Math\" categorystyle=\"math_category\">\r\n            <Block type=\"math_number\"></Block>\r\n            <Block type=\"math_arithmetic\"></Block>\r\n            <Block type=\"math_modulo\"></Block>\r\n            <Block type=\"math_single\"></Block>\r\n            <Block type=\"math_trig\"></Block>\r\n            <Block type=\"math_constant\"></Block>\r\n            <Block type=\"math_number_property\"></Block>\r\n          </Category>\r\n          <Category name=\"List\" categorystyle=\"list_category\">\r\n            <Block type=\"lists_getIndex\"></Block>\r\n            <Block type=\"lists_create_empty\"></Block>\r\n            <Block type=\"lists_create_with\"></Block>\r\n            <Block type=\"lists_repeat\"></Block>\r\n            <Block type=\"lists_length\"></Block>\r\n            <Block type=\"lists_isEmpty\"></Block>\r\n          </Category>\r\n        </BlocklyComponent>\r\n      </div>\r\n      <Layout style={{ height: \"100%\", width: \"25%\" }}>\r\n        <Content style={{ height: \"35%\" }}>\r\n          <Terminal code={code} />\r\n        </Content>\r\n        <Content\r\n          style={{ backgroundColor: \"white\", height: \"60%\", border: \"none\" }}\r\n        >\r\n          <ExportArea code={code} />\r\n        </Content>\r\n        <Footer\r\n          style={{\r\n            height: \"5%\",\r\n            padding: \"5px 10px\",\r\n            borderTop: \"1px solid #cacaca\",\r\n            textAlign: \"center\",\r\n          }}\r\n        >\r\n          Võ Minh Triều - Nguyễn Hoàng Trung - 2020\r\n        </Footer>\r\n      </Layout>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default WorkSpace;\r\nexport { DEFAULT_TITLE, DEFAULT_WORKSPACE };\r\n","D:\\WebLearning\\Viscode\\client\\src\\components\\Terminal.js",["52"],"import React from \"react\";\r\nimport { Button } from \"antd\";\r\nimport { CaretRightOutlined, StopOutlined } from \"@ant-design/icons\";\r\nimport ScrollToBottom from \"react-scroll-to-bottom\";\r\nimport getWorkerCode from \"./worker\";\r\nimport \"./terminal.css\";\r\n\r\nconst getWebWorker = (code) => {\r\n  const blob = new Blob([getWorkerCode(code)]);\r\n  return new Worker(URL.createObjectURL(blob));\r\n};\r\n\r\nfunction Terminal({ code }) {\r\n  const container = React.useRef(null);\r\n  const output = React.useRef(null);\r\n  const [worker, setWorker] = React.useState(null);\r\n  const [running, setRunning] = React.useState(false);\r\n  const caret = React.useRef(null);\r\n\r\n  React.useState(() => {\r\n    if (caret.current) {\r\n      caret.current.value = \"\";\r\n    }\r\n  }, [running]);\r\n\r\n  const runCode = () => {\r\n    if (worker) worker.terminate();\r\n    output.current.innerHTML = \"\";\r\n    caret.current.value = \"\";\r\n    setRunning(true);\r\n    const temp = getWebWorker(code);\r\n    temp.addEventListener(\"message\", (e) => {\r\n      if (e.data.status !== \"done\") {\r\n        if (e.data.waitForInput) {\r\n          output.current.innerHTML += e.data.text.replaceAll(\"\\\\n\", \"<br/>\");\r\n          caret.current.focus();\r\n        } else {\r\n          output.current.innerHTML += e.data.text.replaceAll(\"\\\\n\", \"<br/>\");\r\n        }\r\n      } else {\r\n        temp.terminate();\r\n        setWorker(null);\r\n        setRunning(false);\r\n        output.current.innerHTML += '<br/><span style=\"color: lime\">Program exited with no error</span>';\r\n      }\r\n    });\r\n    setWorker(temp);\r\n  };\r\n\r\n  const stopRunning = () => {\r\n    worker.terminate();\r\n    setRunning(false);\r\n    output.current.innerHTML += '<br/><span style=\"color: red\">Program stopped by user!</span>';\r\n  };\r\n\r\n  const sendInput = (e) => {\r\n    if (e.key === \"Enter\" && worker) {\r\n      output.current.innerHTML += e.target.value + \"<br/>\";\r\n      worker.postMessage(e.target.value);\r\n      e.target.value = \"\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      ref={container}\r\n      style={{\r\n        height: \"100%\",\r\n        display: \"flex\",\r\n        flexFlow: \"column\",\r\n        background: \"black\",\r\n      }}\r\n    >\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          backgroundColor: \"white\",\r\n          padding: \"5px\",\r\n          borderBottom: \"1px solid #cecece\",\r\n        }}\r\n      >\r\n        <h3 style={{ marginBottom: 0 }}>Terminal</h3>\r\n        {running ? (\r\n          <Button\r\n            onClick={stopRunning}\r\n            type=\"primary\"\r\n            danger\r\n            icon={<StopOutlined />}\r\n            title=\"Stop running\"\r\n            style={{ marginLeft: \"auto\" }}\r\n          >\r\n            Stop\r\n          </Button>\r\n        ) : (\r\n          <Button\r\n            type=\"primary\"\r\n            icon={<CaretRightOutlined />}\r\n            title=\"Run code in terminal\"\r\n            onClick={runCode}\r\n            style={{ marginLeft: \"auto\" }}\r\n          >\r\n            Run\r\n          </Button>\r\n        )}\r\n      </div>\r\n\r\n      <div\r\n        style={{ backgroundColor: \"black\", padding: 10, height: \"100%\", overflow: \"auto\" }}\r\n        onClick={() => caret.current.focus()}\r\n      >\r\n        <pre style={{ color: \"rgba(255,255,255,0.9)\" }}>\r\n          Viscode Terminal (c) - All Rights Reserved\r\n          <br />\r\n          <span ref={output}></span>\r\n          <input\r\n            ref={caret}\r\n            onKeyDown={sendInput}\r\n            style={{\r\n              display: \"inline\",\r\n              whiteSpace: \"pre-wrap\",\r\n              border: \"none\",\r\n              lineHeight: 1,\r\n              padding: 0,\r\n              background: \"none\",\r\n              outline: \"none\",\r\n            }}\r\n            type=\"text\"\r\n          />\r\n        </pre>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Terminal;\r\n","D:\\WebLearning\\Viscode\\client\\src\\components\\BlocklyComponent.js",["53","54"],"D:\\WebLearning\\Viscode\\client\\src\\components\\ExportArea.js",[],"D:\\WebLearning\\Viscode\\client\\src\\components\\worker.js",[],"D:\\WebLearning\\Viscode\\client\\src\\components\\OpenModal.js",[],"D:\\WebLearning\\Viscode\\client\\src\\components\\SaveModal.js",[],"D:\\WebLearning\\Viscode\\client\\src\\config\\constant.js",[],{"ruleId":"55","replacedBy":"56"},{"ruleId":"57","replacedBy":"58"},{"ruleId":"59","severity":1,"message":"60","line":3,"column":27,"nodeType":"61","messageId":"62","endLine":3,"endColumn":31},{"ruleId":"59","severity":1,"message":"63","line":4,"column":8,"nodeType":"61","messageId":"62","endLine":4,"endColumn":22},{"ruleId":"59","severity":1,"message":"64","line":8,"column":10,"nodeType":"61","messageId":"62","endLine":8,"endColumn":17},{"ruleId":"65","severity":1,"message":"66","line":60,"column":6,"nodeType":"67","endLine":60,"endColumn":17,"suggestions":"68"},"no-native-reassign",["69"],"no-negated-in-lhs",["70"],"no-unused-vars","'Tabs' is defined but never used.","Identifier","unusedVar","'ScrollToBottom' is defined but never used.","'message' is defined but never used.","react-hooks/exhaustive-deps","React Hook React.useEffect has missing dependencies: 'onChange', 'onWorkSpaceChange', and 'updateXml'. Either include them or remove the dependency array.","ArrayExpression",["71"],"no-global-assign","no-unsafe-negation",{"desc":"72","fix":"73"},"Update the dependencies array to be: [onChange, onWorkSpaceChange, updateXml, workspace]",{"range":"74","text":"75"},[1956,1967],"[onChange, onWorkSpaceChange, updateXml, workspace]"]